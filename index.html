<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>سلة الفواكه</title>
  <link rel="icon" type="image/png" href="Logo.png" />

  <style>
    :root { color-scheme: light dark; }
    html, body {
      margin: 0; padding: 0;
      height: 100%; width: 100%;
      overflow: hidden; background: #000;
    }

    /* Container centers the canvas with letterboxing as needed */
    #unity-container {
      position: fixed; inset: 0;
      display: flex; align-items: center; justify-content: center;
      background: #000; height: 100dvh;
    }

    /* Canvas is sized by JS; keep block to avoid scrollbars */
    #unity-canvas {
      display: block; background: #231F20; image-rendering: auto;
      transform-origin: center center;
      width: 100%; height: 100%;
    }

    /* Loading UI */
    #unity-loading-bar {
      position: absolute; inset: 0;
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      gap: 20px; z-index: 10; pointer-events: none;
    }

    #unity-logo1 {
      width: 40vw; max-width: 280px; height: auto;
    }

    #unity-progress-bar {
      width: 764px; max-width: 90vw; height: 40px;
      background: url('bar.png') no-repeat center center / 100% 100%;
      position: relative; overflow: hidden; border-radius: 10px;
      transform: scale(0.7); transform-origin: top center;
    }
    #unity-progress-bar-fill {
      position: absolute; top: 7px; left: 6px;
      height: calc(100% - 14px); width: 0%;
      background-color: #55CAC2; transition: width 0.3s ease;
      border-radius: 20px 0 0 20px;
    }

    @media (max-width: 768px) {
      #unity-logo1 { width: 50vw; max-width: 200px; }
      #unity-progress-bar { width: 550px; height: 30px; margin-top: 0; }
      #unity-progress-bar-fill { border-radius: 5px 0 0 5px; }
    }
  </style>
</head>

<body>
  <div id="unity-container">
    <canvas id="unity-canvas" tabindex="-1"></canvas>
    <div id="unity-loading-bar">
      <img id="unity-logo1" src="logo1.png" alt="Loading Logo" />
      <div id="unity-progress-bar">
        <div id="unity-progress-bar-fill"></div>
      </div>
    </div>
  </div>

  <!-- Layout: 16:9 letterbox in landscape (mobile & desktop). In portrait (mobile) fill full width & height. -->
  <script>
    (function () {
      const TARGET_ASPECT = 16 / 9;
      const canvas = document.getElementById('unity-canvas');
      const container = document.getElementById('unity-container');

      function isMobile() {
        return /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
      }
      function vp() {
        const vv = window.visualViewport;
        return {
          w: Math.floor(vv ? vv.width : window.innerWidth),
          h: Math.floor(vv ? vv.height : window.innerHeight),
        };
      }
      function isPortrait() {
        const { w, h } = vp();
        return h >= w;
      }

      function applyLayout() {
        if (!canvas || !container) return;
        const { w: vw, h: vh } = vp();

        // Center container regardless
        const cs = container.style;
        cs.position = 'fixed';
        cs.inset = '0';
        cs.display = 'flex';
        cs.alignItems = 'center';
        cs.justifyContent = 'center';
        cs.background = '#000';

        const s = canvas.style;

        if (isMobile()) {
          if (isPortrait()) {
            // Fill full screen in portrait (your requirement)
            s.width = vw + 'px';
            s.height = vh + 'px';
            s.transform = '';
          } else {
            // 16:9 letterbox in landscape
            const viewportAspect = vw / vh;
            let drawW, drawH;
            if (viewportAspect > TARGET_ASPECT) { // too wide
              drawH = vh;
              drawW = Math.floor(drawH * TARGET_ASPECT);
            } else { // too tall
              drawW = vw;
              drawH = Math.floor(drawW / TARGET_ASPECT);
            }
            s.width = drawW + 'px';
            s.height = drawH + 'px';
            s.transform = '';
          }
        } else {
          // Desktop: 16:9 letterbox inside the window
          const viewportAspect = vw / vh;
          let drawW, drawH;
          if (viewportAspect > TARGET_ASPECT) {
            drawH = vh;
            drawW = Math.floor(drawH * TARGET_ASPECT);
          } else {
            drawW = vw;
            drawH = Math.floor(drawW / TARGET_ASPECT);
          }
          s.width = drawW + 'px';
          s.height = drawH + 'px';
          s.transform = '';
        }

        document.body.style.overscrollBehavior = 'none';
      }

      let scheduled = false;
      function schedule() {
        if (scheduled) return;
        scheduled = true;
        requestAnimationFrame(() => {
          scheduled = false;
          applyLayout();
        });
      }

      window.addEventListener('load', schedule, { passive: true });
      window.addEventListener('resize', schedule, { passive: true });
      window.addEventListener('orientationchange', schedule, { passive: true });
      if (window.visualViewport) {
        window.visualViewport.addEventListener('resize', schedule, { passive: true });
        window.visual
